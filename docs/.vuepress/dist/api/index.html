<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Flq | FLQ 中文文档</title><meta name="description" content="让缺乏sql经验的前端开发者与数据库轻松交互">
    <link rel="modulepreload" href="/flq/assets/app.cd4cbc0d.js"><link rel="modulepreload" href="/flq/assets/index.html.cd11a54f.js"><link rel="modulepreload" href="/flq/assets/index.html.bef5b31b.js"><link rel="prefetch" href="/flq/assets/authorSNote.html.af155403.js"><link rel="prefetch" href="/flq/assets/index.html.9f33af18.js"><link rel="prefetch" href="/flq/assets/model.html.0627b476.js"><link rel="prefetch" href="/flq/assets/condition.html.784563b1.js"><link rel="prefetch" href="/flq/assets/introduction.html.cba81faa.js"><link rel="prefetch" href="/flq/assets/model.html.6d88fbbb.js"><link rel="prefetch" href="/flq/assets/modify.html.ade9aab0.js"><link rel="prefetch" href="/flq/assets/query.html.7274daa3.js"><link rel="prefetch" href="/flq/assets/index.html.8243bb40.js"><link rel="prefetch" href="/flq/assets/standard.html.d6c6abef.js"><link rel="prefetch" href="/flq/assets/index.html.e0be920a.js"><link rel="prefetch" href="/flq/assets/index.html.051b7edc.js"><link rel="prefetch" href="/flq/assets/class.html.c5821e5b.js"><link rel="prefetch" href="/flq/assets/student.html.b001eb0f.js"><link rel="prefetch" href="/flq/assets/index.html.4dafadc4.js"><link rel="prefetch" href="/flq/assets/404.html.7d858b3d.js"><link rel="prefetch" href="/flq/assets/authorSNote.html.16bd8be7.js"><link rel="prefetch" href="/flq/assets/index.html.f6b2d2d8.js"><link rel="prefetch" href="/flq/assets/model.html.d7e80a6b.js"><link rel="prefetch" href="/flq/assets/condition.html.ac598a10.js"><link rel="prefetch" href="/flq/assets/introduction.html.b6b76907.js"><link rel="prefetch" href="/flq/assets/model.html.134ffe8f.js"><link rel="prefetch" href="/flq/assets/modify.html.c1ee5080.js"><link rel="prefetch" href="/flq/assets/query.html.2e4d0e1a.js"><link rel="prefetch" href="/flq/assets/index.html.a6a4dc91.js"><link rel="prefetch" href="/flq/assets/standard.html.d005edd8.js"><link rel="prefetch" href="/flq/assets/index.html.74ea6094.js"><link rel="prefetch" href="/flq/assets/index.html.41781198.js"><link rel="prefetch" href="/flq/assets/class.html.567af4b5.js"><link rel="prefetch" href="/flq/assets/student.html.67d1da5a.js"><link rel="prefetch" href="/flq/assets/index.html.d6a8f159.js"><link rel="prefetch" href="/flq/assets/404.html.7ead47d1.js"><link rel="prefetch" href="/flq/assets/404.6fce955e.js"><link rel="prefetch" href="/flq/assets/Layout.ad86e9b5.js">
    <link rel="stylesheet" href="/flq/assets/style.fc11af0f.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/flq/" class=""><img class="logo" src="/flq/hero.png" alt="FLQ 中文文档"><span class="site-name can-hide">FLQ 中文文档</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/flq/guide/" class="" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-item"><a aria-current="page" href="/flq/api/" class="router-link-active router-link-exact-active router-link-active" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="演示表格"><span class="title">演示表格</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="演示表格"><span class="title">演示表格</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/flq/table/student.html" class="" aria-label="student"><!--[--><!--]--> student <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/flq/table/class.html" class="" aria-label="class"><!--[--><!--]--> class <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/flq/update/" class="" aria-label="更新日志"><!--[--><!--]--> 更新日志 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/flq/support/" class="" aria-label="支持"><!--[--><!--]--> 支持 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/flq/api/" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/flq/en/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://gitee.com/cffh/flq" rel="noopener noreferrer" target="_blank" aria-label="查看源码"><!--[--><!--]--> 查看源码 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/flq/guide/" class="" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-item"><a aria-current="page" href="/flq/api/" class="router-link-active router-link-exact-active router-link-active" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="演示表格"><span class="title">演示表格</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="演示表格"><span class="title">演示表格</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/flq/table/student.html" class="" aria-label="student"><!--[--><!--]--> student <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/flq/table/class.html" class="" aria-label="class"><!--[--><!--]--> class <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/flq/update/" class="" aria-label="更新日志"><!--[--><!--]--> 更新日志 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/flq/support/" class="" aria-label="支持"><!--[--><!--]--> 支持 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/flq/api/" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/flq/en/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://gitee.com/cffh/flq" rel="noopener noreferrer" target="_blank" aria-label="查看源码"><!--[--><!--]--> 查看源码 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a aria-current="page" href="/flq/api/" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="Flq"><!--[--><!--]--> Flq <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/flq/api/#方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="方法"><!--[--><!--]--> 方法 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/flq/api/#test" class="router-link-active router-link-exact-active sidebar-item" aria-label="test"><!--[--><!--]--> test <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#getconnect" class="router-link-active router-link-exact-active sidebar-item" aria-label="getConnect"><!--[--><!--]--> getConnect <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#end" class="router-link-active router-link-exact-active sidebar-item" aria-label="end"><!--[--><!--]--> end <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#query" class="router-link-active router-link-exact-active sidebar-item" aria-label="query"><!--[--><!--]--> query <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#format" class="router-link-active router-link-exact-active sidebar-item" aria-label="format"><!--[--><!--]--> format <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#send" class="router-link-active router-link-exact-active sidebar-item" aria-label="send"><!--[--><!--]--> send <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#clone" class="router-link-active router-link-exact-active sidebar-item" aria-label="clone"><!--[--><!--]--> clone <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#insert" class="router-link-active router-link-exact-active sidebar-item" aria-label="insert"><!--[--><!--]--> insert <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#from" class="router-link-active router-link-exact-active sidebar-item" aria-label="from"><!--[--><!--]--> from <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#mainkey" class="router-link-active router-link-exact-active sidebar-item" aria-label="mainKey"><!--[--><!--]--> mainKey <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#field" class="router-link-active router-link-exact-active sidebar-item" aria-label="field"><!--[--><!--]--> field <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#where" class="router-link-active router-link-exact-active sidebar-item" aria-label="where"><!--[--><!--]--> where <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#group" class="router-link-active router-link-exact-active sidebar-item" aria-label="group"><!--[--><!--]--> group <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#limit" class="router-link-active router-link-exact-active sidebar-item" aria-label="limit"><!--[--><!--]--> limit <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#size" class="router-link-active router-link-exact-active sidebar-item" aria-label="size"><!--[--><!--]--> size <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#page" class="router-link-active router-link-exact-active sidebar-item" aria-label="page"><!--[--><!--]--> page <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#order" class="router-link-active router-link-exact-active sidebar-item" aria-label="order"><!--[--><!--]--> order <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#foundrows" class="router-link-active router-link-exact-active sidebar-item" aria-label="foundRows"><!--[--><!--]--> foundRows <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#find" class="router-link-active router-link-exact-active sidebar-item" aria-label="find"><!--[--><!--]--> find <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#findrows" class="router-link-active router-link-exact-active sidebar-item" aria-label="findRows"><!--[--><!--]--> findRows <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#first" class="router-link-active router-link-exact-active sidebar-item" aria-label="first"><!--[--><!--]--> first <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#add" class="router-link-active router-link-exact-active sidebar-item" aria-label="add"><!--[--><!--]--> add <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#count" class="router-link-active router-link-exact-active sidebar-item" aria-label="count"><!--[--><!--]--> count <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#del" class="router-link-active router-link-exact-active sidebar-item" aria-label="del"><!--[--><!--]--> del <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#getlist" class="router-link-active router-link-exact-active sidebar-item" aria-label="getList"><!--[--><!--]--> getList <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#setlist" class="router-link-active router-link-exact-active sidebar-item" aria-label="setList"><!--[--><!--]--> setList <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#slicelist" class="router-link-active router-link-exact-active sidebar-item" aria-label="sliceList"><!--[--><!--]--> sliceList <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#insertlist" class="router-link-active router-link-exact-active sidebar-item" aria-label="insertList"><!--[--><!--]--> insertList <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/flq/api/#recursion" class="router-link-active router-link-exact-active sidebar-item" aria-label="recursion"><!--[--><!--]--> recursion <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/flq/api/#属性" class="router-link-active router-link-exact-active sidebar-item" aria-label="属性"><!--[--><!--]--> 属性 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/flq/api/#type" class="router-link-active router-link-exact-active sidebar-item" aria-label="type"><!--[--><!--]--> type <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/flq/api/model.html" class="sidebar-item sidebar-heading" aria-label="Model"><!--[--><!--]--> Model <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="flq" tabindex="-1"><a class="header-anchor" href="#flq" aria-hidden="true">#</a> Flq</h1><h2 id="方法" tabindex="-1"><a class="header-anchor" href="#方法" aria-hidden="true">#</a> 方法</h2><h3 id="test" tabindex="-1"><a class="header-anchor" href="#test" aria-hidden="true">#</a> test</h3><p><code>test(callBack: (this: Flq) =&gt; Promise&lt;any&gt;): void</code></p><p>用于测试连接。</p><p>在<code>callBack</code>执行完后自动调用<code>flq.end()</code>方法结束连接。</p><ul><li><p><strong>callBack</strong></p><p>异步回调函数。该回调的<code>this</code>指向<code>flq</code>实例本身。</p></li></ul><div class="custom-container tip"><p class="custom-container-title">提示</p><p>如果只是想利用异步环境，可以<code>return false</code>以阻止自动关闭连接</p></div><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>flq<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> db <span class="token operator">=</span> flq<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&#39;student&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="getconnect" tabindex="-1"><a class="header-anchor" href="#getconnect" aria-hidden="true">#</a> getConnect</h3><p><code>getConnect(): Promise&lt;Connection&gt;</code></p><p>返回一个数据库连接</p><h3 id="end" tabindex="-1"><a class="header-anchor" href="#end" aria-hidden="true">#</a> end</h3><p><code>end(): Promise&lt;void&gt;</code></p><p>用于结束数据库连接</p><h3 id="query" tabindex="-1"><a class="header-anchor" href="#query" aria-hidden="true">#</a> query</h3><p><code>query(sql: string, connection?: Connection | Pool): Promise&lt;any&gt;</code></p><p>传入一个 sql 语句发起查询，可自定义执行查询的连接</p><ul><li><p><strong>sql</strong></p><p>sql 语句</p></li><li><p><strong>connection</strong></p><p>连接</p></li></ul><h3 id="format" tabindex="-1"><a class="header-anchor" href="#format" aria-hidden="true">#</a> format</h3><p><code>format(template: string): string</code></p><p>格式化 sql 语句</p><ul><li><p><strong>template</strong></p><p>sql 模板。所用可用的模板可以在<a href="https://gitee.com/flycran/flq/blob/master/src/templates.ts" target="_blank" rel="noopener noreferrer">flq/src/templates<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 下找到。</p></li></ul><h3 id="send" tabindex="-1"><a class="header-anchor" href="#send" aria-hidden="true">#</a> send</h3><p><code>send(template: string): Promise&lt;any&gt;</code></p><p>发送 sql 语句。与<code>query</code>不同，<code>send</code>将自动调用<code>format</code>生成 sql 语句，并调用模型处理。</p><ul><li><p><strong>template</strong></p><p>sql 模板。所用可用的模板可以在<a href="https://gitee.com/flycran/flq/blob/master/src/templates.ts" target="_blank" rel="noopener noreferrer">flq/src/templates<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 下找到。</p></li></ul><h3 id="clone" tabindex="-1"><a class="header-anchor" href="#clone" aria-hidden="true">#</a> clone</h3><p><code>clone(): Flq</code></p><p>克隆<code>flq</code>实例，将继承 mysql 连接和 FLQ 模型，拷贝 sql 配置和字段映射。</p><h3 id="insert" tabindex="-1"><a class="header-anchor" href="#insert" aria-hidden="true">#</a> insert</h3><p><code>insert(slot: Record&lt;string, any&gt;): Flq</code></p><p>插入（插槽）</p><ul><li><strong>slot</strong> 由插槽名和值组成的键值对</li></ul><h3 id="from" tabindex="-1"><a class="header-anchor" href="#from" aria-hidden="true">#</a> from</h3><p><code>from(...option: string[]): Flq</code></p><p>配置操作的表格，尽量优先配置该选项，否则模型处理将不会工作</p><ul><li><strong>option</strong> 直接填表名即可，可以传多个表名，若传递多个表名，在引用字段时则需要显式指定表名。例如:<code>&#39;student.name&#39;</code></li></ul><h3 id="mainkey" tabindex="-1"><a class="header-anchor" href="#mainkey" aria-hidden="true">#</a> mainKey</h3><p><code>mainKey(value: Dbany | Dbany[], idKey?: string): Flq</code></p><p>按主键查询或指定键查询</p><ul><li><strong>value</strong> 查询值，传入数组将查询匹配数组中任意元素的数据，否则查询<code>idKey</code>等于<code>value</code>的数据</li><li><strong>idKey</strong> 键名，省略时将使用</li></ul><h3 id="field" tabindex="-1"><a class="header-anchor" href="#field" aria-hidden="true">#</a> field</h3><p><code>field(...option: FieldOption[]): Flq</code></p><p>配置查询的字段，该配置会影响<a href="/" target="_blank" rel="noopener noreferrer">字段映射<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li><p><strong>option</strong> 字段配置，可选字符串、字符串数组或者对象</p><ul><li><p>当传入字符串时</p><p>将查询该字段，支持显式指定表名，例如：<code>&#39;student.name&#39;</code></p><div class="custom-container tip"><p class="custom-container-title">提示</p><p><code>Flq</code>所有需要用到字段名的地方都支持显式指定表名，下文不再赘述</p></div><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;age&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// &#39;name&#39;, &#39;age&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>当传入字符串数组时</p><p>将查询所有数组中的字段，与上述用法类似，通常配合聚合方法使用。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">field</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;age&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// &#39;name&#39;, &#39;age&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>当传入对象时</p><p>将键<code>key</code>重命名为值<code>value</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">field</span><span class="token punctuation">(</span><span class="token punctuation">{</span> gender<span class="token operator">:</span> <span class="token string">&#39;sex&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// result: `gende` as &#39;sex&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>当<code>value</code>是数组时，可以指定聚合方法和可选的重命名</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">field</span><span class="token punctuation">(</span><span class="token punctuation">{</span> chinese<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;AVG&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> math<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;AVG&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;数学平均成绩&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// AVG(`chinese`) as &#39;chinese&#39;, AVG(`math`) as &#39;数学平均成绩&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>使用聚合方法的字段，如果不指定重命名，将默认重命名为字段本身的名字</p></div><p>当键名时聚合方法时，<code>value</code>将作为<code>option</code>被重新传入<code>field</code>解析，但默认会包裹聚合方法，在多个字段需要用同一个聚合方法时尤其好用</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">field</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token constant">AVG</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;chinese&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;math&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;english&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// AVG(`chinese`) as &#39;chinese&#39;, AVG(`math`) as &#39;math&#39;, AVG(`english`) as &#39;english&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果需要重命名</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">field</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token constant">AVG</span><span class="token operator">:</span> <span class="token punctuation">{</span> chinese<span class="token operator">:</span> <span class="token string">&#39;语文&#39;</span><span class="token punctuation">,</span> math<span class="token operator">:</span> <span class="token string">&#39;数学&#39;</span><span class="token punctuation">,</span> english<span class="token operator">:</span> <span class="token string">&#39;英语&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// AVG(`chinese`) as &#39;语文&#39;, AVG(`math`) as &#39;数学&#39;, AVG(`english`) as &#39;英语&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="where" tabindex="-1"><a class="header-anchor" href="#where" aria-hidden="true">#</a> where</h3><p><code>where(...option: WhereOption[]): Flq</code></p><p>查询条件</p><h3 id="group" tabindex="-1"><a class="header-anchor" href="#group" aria-hidden="true">#</a> group</h3><p><code>group(option: string): Flq</code></p><p>分组查询</p><ul><li><p><strong>option</strong></p><p>传入分组的字段即可</p></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">&#39;gender&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="limit" tabindex="-1"><a class="header-anchor" href="#limit" aria-hidden="true">#</a> limit</h3><p><code>limit(...option: LimitOption): Flq</code></p><p>配置分页</p><ul><li><p><strong>...option</strong></p><p>传入对象或字符串数组</p><ul><li><p>传入对象时</p><p><code>{ page: number, size: number }</code></p><ul><li><p>page</p><p>页码</p></li><li><p>page</p><p>每页条数</p></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  page<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  size<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// LIMIT 0, 5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>传入数值时</p><p><code>[offset: number, limit: number]</code></p><ul><li><p>offset</p><p>偏移量</p></li><li><p>limit</p><p>条数</p></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token comment">// LIMIT 5, 5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h3 id="size" tabindex="-1"><a class="header-anchor" href="#size" aria-hidden="true">#</a> size</h3><p><code>size(size: number): Flq</code></p><p>单独设置每页条数</p><ul><li><p><strong>size</strong></p><p>每页条数</p></li></ul><h3 id="page" tabindex="-1"><a class="header-anchor" href="#page" aria-hidden="true">#</a> page</h3><p><code>page(page: number): Flq</code></p><p>单独设置每页条数</p><ul><li><p><strong>page</strong></p><p>页码</p></li></ul><div class="custom-container warning"><p class="custom-container-title">警告</p><p>在配置<code>page</code>前必须先配置<code>size</code></p></div><h3 id="order" tabindex="-1"><a class="header-anchor" href="#order" aria-hidden="true">#</a> order</h3><p><code>order(option: OrderOption, defOp?: OrderOption.Op): Flq</code></p><p>配置排序</p><ul><li><p><strong>option</strong></p><p>传入字符串、字符串数组或对象</p><ul><li><p>传入字符串时</p><p>按传入的字段排序，排序规则取决于<code>defOp</code>的值</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">order</span><span class="token punctuation">(</span><span class="token string">&#39;age&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// ORDER BY `age`</span>
<span class="token function">order</span><span class="token punctuation">(</span><span class="token string">&#39;age&#39;</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment">// ORDER BY `age` DESC</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>传入数组时</p><p>将所有数组中的字段按顺序排序，排序规则取决于<code>defOp</code>的值</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">order</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;age&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;id&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// ORDER BY `age`, `id`</span>
<span class="token function">order</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;age&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;id&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment">// ORDER BY `age` DESC, `id` DESC</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>传入对象时</p><p>将按照<code>value</code>的值决定排序规则</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">order</span><span class="token punctuation">(</span><span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> id<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ORDER BY `age`, `id` DESC</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>当键名是排序规则时，将<code>value</code>重新传入<code>order</code>解析。可以传入所有<code>option</code>允许的值，但通常配合数组使用。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">order</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;age&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&#39;-1&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;chinese&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;math&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;english&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ORDER BY `id`, `age`, `chinese` DESC, `math` DESC, `english` DESC</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>defOp</strong></p><p>默认排序规则，可用的排序规则为<code>1</code>、<code>-1</code>、<code>ASC</code>、<code>DESC</code>。其中的<code>1</code>和<code>-1</code>可以是字符串或数值</p></li></ul><h3 id="foundrows" tabindex="-1"><a class="header-anchor" href="#foundrows" aria-hidden="true">#</a> foundRows</h3><p><code>foundRows(): Flq</code></p><p>在分页查询时，自动返回查询的总条数。总条数将保存在调用<code>flq.find()</code>的实例下。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> db <span class="token operator">=</span> flq
  <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&#39;student&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;age&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;chinese&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;math&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;english&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">{</span>page<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> size<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">foundRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>db<span class="token punctuation">.</span>sql<span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;总列数:&#39;</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span>total<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="find" tabindex="-1"><a class="header-anchor" href="#find" aria-hidden="true">#</a> find</h3><p><code>find(): Promise&lt;Record&lt;string, any&gt;[]&gt;</code></p><p>执行查询语句<a href="https://gitee.com/flycran/flq/blob/master/src/templates.ts" target="_blank" rel="noopener noreferrer">（template: select）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="findrows" tabindex="-1"><a class="header-anchor" href="#findrows" aria-hidden="true">#</a> findRows</h3><p><code>findRows(): Promise&lt;{ total: number, data: Record&lt;string, any&gt;[] }&gt;</code></p><p>执行查询并返回符合条件的总列数<a href="https://gitee.com/flycran/flq/blob/master/src/templates.ts" target="_blank" rel="noopener noreferrer">（template: select）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="first" tabindex="-1"><a class="header-anchor" href="#first" aria-hidden="true">#</a> first</h3><p><code>first(): Promise&lt;Record&lt;string, any&gt;&gt;</code></p><p>查询匹配的第一条数据<a href="https://gitee.com/flycran/flq/blob/master/src/templates.ts" target="_blank" rel="noopener noreferrer">（template: first）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>该方法会忽略分页、分组、排序等无意义的配置项。</p><h3 id="add" tabindex="-1"><a class="header-anchor" href="#add" aria-hidden="true">#</a> add</h3><p><code>add(): Promise&lt;Record&lt;string, any&gt;&gt;</code></p><p>执行插入语句<a href="https://gitee.com/flycran/flq/blob/master/src/templates.ts" target="_blank" rel="noopener noreferrer">（template: insert）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="count" tabindex="-1"><a class="header-anchor" href="#count" aria-hidden="true">#</a> count</h3><p><code>count(): Promise&lt;number&gt;</code></p><p>查询复合条件的数据条数<a href="https://gitee.com/flycran/flq/blob/master/src/templates.ts" target="_blank" rel="noopener noreferrer">（template: count）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="del" tabindex="-1"><a class="header-anchor" href="#del" aria-hidden="true">#</a> del</h3><p><code>del(): Promise&lt;Record&lt;string, any&gt;&gt;</code></p><p>执行删除语句<a href="https://gitee.com/flycran/flq/blob/master/src/templates.ts" target="_blank" rel="noopener noreferrer">（template: delete）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="getlist" tabindex="-1"><a class="header-anchor" href="#getlist" aria-hidden="true">#</a> getList</h3><p><code>getList(): Promise&lt;Record&lt;string, any&gt;[]&gt;</code></p><p>仅列表结构有效</p><p>获取列表数组，结果会按照索引字段的值进行排序</p><h3 id="setlist" tabindex="-1"><a class="header-anchor" href="#setlist" aria-hidden="true">#</a> setList</h3><p><code>setList(values: Data[]): Promise&lt;{ remove, inserts }&gt;</code></p><p>仅列表结构有效</p><p>设置列表数组，传入一个数据数组，将覆盖所有原列表数据</p><p>该方法根据<code>where</code>和<code>value</code>的内容来确定需要删除的数据，请注意如果两者都为空则可能清空表格</p><ul><li><p><strong>values</strong></p><p>数据数组</p></li></ul><h3 id="slicelist" tabindex="-1"><a class="header-anchor" href="#slicelist" aria-hidden="true">#</a> sliceList</h3><p><code>sliceList(index: number, count: number = 1): Promise&lt;{ remove, update }&gt;</code></p><p>仅列表结构有效</p><p>截取列表，该操作会删除指定位置和数量的数据</p><p>该操作将直接删除数据，而不会返回截取的数据，如果需要截取并返回数据，请使用<code>where</code>+<code>BETWEEN</code></p><ul><li><p><strong>index</strong></p><p>索引，指定从什么位置开始截取</p></li><li><p><strong>count</strong></p><p>数量，指定截取的条数</p></li></ul><h3 id="insertlist" tabindex="-1"><a class="header-anchor" href="#insertlist" aria-hidden="true">#</a> insertList</h3><p><code>insertList(index: number, data: Record&lt;string, any&gt;[]): Promise&lt;{ update, inserts }&gt;</code></p><p>仅列表结构有效</p><p>插入列表</p><p>将数据插入指定位置，位于该位置之后的数据将自动后移</p><ul><li><p><strong>index</strong> 索引，指定从什么位置开始插入</p></li><li><p><strong>data</strong> 要插入的数据数组</p></li></ul><h3 id="recursion" tabindex="-1"><a class="header-anchor" href="#recursion" aria-hidden="true">#</a> recursion</h3><p><code>recursion(option: RecursionOption = {}): Promise&lt;Record&lt;string, any&gt;[]&gt;</code></p><p>仅枝叶结构有效</p><p>该方法根据查询的方向和是否扁平化课分为四种模式</p><ul><li><p>option</p><p>选项</p><ul><li><p>type</p><p>模式，可选的模式为<code>up</code>向上递归，<code>down</code>向下递归</p></li><li><p>gradation</p></li></ul><p>是否使用层次模式</p><ul><li>stop</li></ul><p>停止条件，传入<code>number</code>则在数据的<code>gradeField</code>等于<code>stop</code>时停止递归，传入<code>function</code>则调用函数，在函数返回<code>true</code> 时停止递归。函数接收一个数据数组作为参数(<code>Record&lt;string, any&gt;[]</code>)，并且该数组的长度不是<code>0</code>。若不提供该参数则在无法查询到更多关联数据时自动停止递归。</p></li><li><p>flq</p></li></ul><p><code>Flq</code>的实例对象，如果提供该参数，则使用提供的对象查询关联数据，否则使用自动克隆的实例查询。该选项在需要对递归做额外限制的时候有用。</p><h2 id="属性" tabindex="-1"><a class="header-anchor" href="#属性" aria-hidden="true">#</a> 属性</h2><h3 id="type" tabindex="-1"><a class="header-anchor" href="#type" aria-hidden="true">#</a> type</h3><p><code>type: &#39;select&#39; | &#39;insert&#39; | &#39;update&#39; | &#39;delect&#39;</code></p><p>sql语句的类型，在调用查询时定义</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://gitee.com/cffh/flq/edit/main/api/readme.md" rel="noopener noreferrer" target="_blank" aria-label="帮助我们改善此页面！"><!--[--><!--]--> 帮助我们改善此页面！ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">本页更新于: </span><!----></div><!----></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/flq/api/model.html" class="" aria-label="Model"><!--[--><!--]--> Model <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/flq/assets/app.cd4cbc0d.js" defer></script>
  </body>
</html>
